{
	"handlers":{
		"rule":"$order обязательно есть"
	},
	"rules":{
        "wait":{
            "edit":{
				"orders":true,
				"admin":true
			},
			"notice":"default",
			"short":"",
			"caption":"Заказ",
			"title":"Оформление заказа",
			"user":{
				"buttons":{
					"basket":"secondary", 
					"sbrfpay":"success",
					"check":"success"
				},
				"actions":["check","print"]
			}
		},
        "check":{
			"edit":{
				"orders":false,
				"admin":true
			},
			"notice":"warning",
			"short":"На проверке",
			"caption":"Заказы ожидающие проверку менеджера",
			"title":"Заказ находится на проверке",
			"user":{
				"buttons":{"basket":"secondary"},
				"actions":["print"]
			},
			"manager":{
				"buttons":{"basket":"secondary", "email":"secondary", "complete":"success"},
				"actions":["complete","delete","sync","print"]
			}
		},
		"wait2":{
			"edit":{
				"orders":true,
				"admin":true
			},
			"notice":"success",
			"short":"Есть ответ менеджера",
			"caption":"Заказ с ответом менеджера",
			"title":"Есть ответ менеджера",
			"user":{
				"buttons":{"check":"success"},
				"actions":["active","check","sync","print"]
			},
			"manager":{
				"buttons":{"complete":"warning","email":"danger", "sync":"success"},
				"actions":["check","complete","delete","email","sync","print"]
			}
		},
		"complete":{
			"freeze":true,
			"edit":{
				"orders":false,
				"admin":true
			},
			"notice":"default",
			"short":"Готов",
			"caption":"Выполненные заказы",
			"title":"Заказ выполнен",
			"user":{
				"buttons":{"print":"success"},
				"actions":["print"]
			},
			"manager":{
				"buttons":{"basket":"secondary", "email":"danger"},
				"actions":["delete","email","sync","print"]
			}
		},
		
		"paykeeper":{
			"freeze":true,
			"notice":"info",
			"edit":{
				"orders":false,
				"admin":false
			},
			"caption":"Заказы ожидающие оплату",
			"short":"Ожидает оплату",
			"title":"Заказ ожидает оплату",
			"user":{
				"buttons":{"basket":"secondary","paykeeper":"success"},
				"actions":["sync","print"]
			},
			"manager":{
				"buttons":{"basket":"secondary", "email":"secondary", "complete":"success"},
				"actions":["complete","delete","sync","print"]
			}
		},
		"sbrfpay":{
			"freeze":true,
			"notice":"info",
			"edit":{
				"orders":false,
				"admin":false
			},
			"caption":"Заказы ожидающие оплату",
			"short":"Ожидает оплату",
			"title":"Заказ ожидает оплату",
			"user":{
				"buttons":{"basket":"secondary","sbrfpay":"success"},
				"actions":["sync","print"]
			},
			"manager":{
				"buttons":{"basket":"secondary", "email":"secondary", "complete":"success"},
				"actions":["complete","delete","sync","print"]
			}
        }
	},
    "actions":{
		"orders":{
			"handlers":{
				"fuser":true
			}
        },
		"ousers":{
			"handlers":{
				"order":true
			}
        },
		"create":{
			"handlers":{
				"fuser":true,
				"admin":true,
				"post":true
			}
        },
		"order":{
			"handlers":{
				"order":true
			}
		},
		"add":{
			"handlers":{
				"status":["wait"],
				"order":true,
				"ouser":true,
				"payd":true,
				"post":true,
				"rule":true,
				"model":true
			}
        },
        "check":{
			"goal":"cart",
			"title":"CR049.1M",
			"handlers":{
				"status":["wait"],
				"order":true,
				"ouser":true,
				"post":true,
				"payd":true,
				"rule":true,
				"freeze":true,
				"checkdata":true
			}
		},
		"active":{
			"title":"CR050.1C",
			"handlers":{
				"order":true,
				"ouser":true,
				"fuser":true,
				"post":true,
				"payd":true,
				"rule":true,
				"unfreeze":true,
				"status":["check"]
			}
		},
        "delete":{
			"handlers":{
				"admin":true,
				"order":true,
				"ouser":true,
				"post":true,
				"rule":true
			},
			"title":"CR047",
			"confirm":"CR048"
		},
		"remove":{
			"handlers":{
				"status":["wait"],
				"post":true,
				"order":true,
				"payd":true,
				"rule":true
			},
			"title":"CR051",
			"noscroll":true
		},
        "sync":{
			"title":"CR041",
			"handlers":{
				"status":["wait"],
				"order":true,
				"ouser":true,
				"post":true,
				"payd":true,
				"rule":true
			}
		},
		"clear":{
			"handlers":{
				"status":["wait"],
				"order":true,
				"post":true,
				"payd":true,
				"rule":true
			},
			"title":"CR035.1M",
			"confirm":"CR036.1M"
		},
		"complete":{
			"handlers":{
				"status":true,
				"admin":true,
				"order":true,
				"post":true,
				"rule":true
			},
			"title":"CR038.1A",
			"confirm":"CR039.1A"
		},
		"years":{

		},
		"meta":{
			
		},
		"sbrfpay":{
			"handlers":{
				"checkdata":true
			},
			"title":"Оплатить",
			"gohistory":{
				"orders":"/cart/orders/{order_nick}",
				"admin":"/cart/admin/{order_nick}"
			},
			"go":{
				"orders":"/cart/orders/{order_nick}/sbrfpay",
				"admin":"/cart/admin/{order_nick}/sbrfpay"
			}
		},
		"paykeeper":{
			"handlers":{
				"checkdata":true
			},
			"title":"Оплатить",
			"gohistory":{
				"orders":"/cart/orders/{order_nick}",
				"admin":"/cart/admin/{order_nick}"
			},
			"go":{
				"orders":"/cart/orders/{order_nick}/paykeeper",
				"admin":"/cart/admin/{order_nick}/paykeeper"
			}
		},
		"print":{
			"title":"CR052.1M",
			"go":{
				"orders":"/cart/orders/{order_nick|:my}/print",
				"admin":"/cart/admin/{order_nick|:my}/print"
			}
		},
		"basket":{
			"title":"CR053.1M",
			"go":{
				"orders":"/cart/orders/{order_nick|:my}/list",
				"admin":"/cart/admin/{order_nick|:my}/list"
			}
		},
		"email":{
			"handlers":{
				"admin":true,
				"order":true,
				"post":true,
				"rule":true
			},
			"title":"CR054.M1",
			"confirm":{
				"tpl":"-cart/cart.tpl",
				"tplroot":"EMAIL"
			}
		}
	}
}